<p class="super-border private-black-title">Detalle del Patrón</p>
<p>
    <ul class="public-list-first-level">
        <li>Las cotizaciones que usa Market Observatory son al <b>Cierre del Mercado en el horario regular</b>, lo que en la práctica supone que una Compra o una Venta se realiza hacia el final de la sesión –end of day-.         <div style="display: inline-block;" ng-click="show=!show" ng-show="!show"><img
                src="assets/img/textdown.png"><a class="toggle-link" style="padding-left: 5px;">Mostrar más</a>
        </div></li>

        <div ng-show="show">
            <ul class="public-list-first-level">
                <li>Las Fechas de Entrada -o apertura de posición- y Salida -o cierre de posición- siguen el siguiente convenio:
                    <ul class="public-list-second-level">
                        <li>Si Fecha de <b>Entrada</b> coincide en festivo, la operación se realiza el “Día <b>Siguiente</b> con Sesión”</li>
                        <li>Si Fecha de <b>Salida</b> coincide en festivo, la operación se realiza el “Día <b>Anterior</b> con Sesión”</li>
                    </ul>
                </li>
                <li>Si desea afinar las Fechas de Entrada y Salida tenga en cuenta que:
                    <ul class="public-list-second-level">
                        <li>En un mercado Alcista las Compras se pueden adelantar y las Ventas retrasar.</li>
                        <li>En un mercado Bajista las Ventas se pueden adelantar y las Compras retrasar.</li>
                    </ul>
                </li>
                <li>Antes de tomar una posición en los valores menos líquidos, debe analizar el Volumen diario negociado y dimensionar correctamente el tamaño de su orden.</li>
                <li>Una “Venta a Corto” tiene un riesgo mayor que una Compra y aumenta en valores de alta volatilidad y que negocian escaso Volumen.</li>
                <li>Impacto de los Dividendos. Las cotizaciones recogen el reparto de los dividendos, un valor que cotiza a 10 EUR y distribuye en dividendos 1 EUR, baja su cotización a 9 EUR –aunque el valor neto de la inversión no ha bajado-. En el contexto de Market Observatory esto significa que:
                    <ul class="public-list-second-level">
                        <li>Los Patrones Alcistas pueden estar infravalorados. A la rentabilidad acumulada habría que sumarle los dividendos repartidos en el periodo.</li>
                        <li>Los Patrones Bajistas pueden estar sobrevalorados. A la rentabilidad acumulada habría que restarle los dividendos repartidos en el periodo</li>
                    </ul>

                </li>
                <li>Para ampliar información sobre el Detalle de un Patrón leer <a ng-click="openModalInstance('services/detailed_description/basic')">Detalle Patrón Acciones.</a></li>
            </ul>
            <p>
                <img src="assets/img/textup.png"> <a style="padding-left: 5px;" class="toggle-link" ng-click="show=!show">Mostrar
                menos</a>
            </p>
        </div>

        <li>Nunca arriesgue un porcentaje elevado de su cartera en una sola operación. Use siempre técnicas de Gestión del Dinero.</li>

        <li>La información de la Estrategia NO se puede considerar en ningún caso una recomendación.</li>
    </ul>
</p>

<div class="detail-tab">{{actualTab}}</div>
<div class="pdf-icon-detail" ng-click="generateHistoricalDetailPdf(infoPattern.id)"></div>
<div class="detail-container">
    <table class="detail-table">
        <thead>
        <tr>
            <th colspan="10">
                <table class="detail-header">
                    <tr>
                        <th rowspan="2" style="padding-left: 10px;">
                            <span class="buy-color" ng-show="infoPattern.patternType == 'BULLISH'"><b>COMPRAR</b></span>
                            <span class="sell-color" ng-show="infoPattern.patternType == 'BEARISH'"><b>VENDER (A corto)</b></span>
                        </th>
                        <th rowspan="2" ng-class="{'buy-color': infoPattern.patternType == 'BULLISH', 'sell-color': infoPattern.patternType == 'BEARISH'}">
                            <div  tooltip-html-unsafe="{{infoPattern.name}}" class="detail-div-tooltip-container">
                                <div class="detail-separator"><b >{{infoPattern.name}}</b></div>
                            </div>
                        </th>
                        <th rowspan="2" ng-class="{'buy-color': infoPattern.patternType == 'BULLISH', 'sell-color': infoPattern.patternType == 'BEARISH'}">
                            <div  tooltip-html-unsafe="{{infoPattern.sector}} / {{infoPattern.industry}}" class="detail-div-tooltip-container">
                                <div class="detail-separator"><b >{{infoPattern.sector}} <span ng-show="infoPattern.sector != null && infoPattern.industry">/</span> {{infoPattern.industry}}</b></div>
                            </div>
                        </th>
                        <th class="label-date-header-detail"><img src='assets/img/entry_orange_arrow.png'>Fecha Entrada</th>
                        <th>{{ infoPattern.entryDate | date: 'dd MMM'}}</th>
                        <th class="currency-detail" rowspan="2">
                            <div  tooltip-html-unsafe="{{infoPattern.currency}}" class="detail-div-tooltip-container">
                                <div class="detail-separator"><img src='assets/img/currency-detail.png'>{{infoPattern.currency}}</div>
                            </div>
                        </th>
                    </tr>
                    <tr>
                        <th class="label-date-header-detail"><img src='assets/img/exit_orange_arrow.png'>Fecha Salida</th>
                        <th>{{ infoPattern.exitDate | date: 'dd MMM'}}</th>
                    </tr>
                </table>
            </th>
        </tr>
        </thead>
        <tbody>
            <tr>
                <td rowspan="2" >Año</td>
                <td colspan="2" class="border-right-table">Entrada <img src='assets/img/entry_arrow.png'></td>
                <td colspan="2" class="border-right-table"><img src='assets/img/exit_arrow.png'> Salida</td>
                <td class="border-right-table">Rentabilidad</td>
                <td colspan="2" class="border-right-table">Mejor Ganancia</td>
                <td colspan="2" class="border-right-table">Peor Pérdida</td>
            </tr>
            <tr>
                <td>Fecha</td>
                <td class="border-right-table" style="width: 68px">Precio</td>
                <td class="sub-border-right-table">Fecha</td>
                <td class="border-right-table" style="width: 68px">Precio</td>
                <td class="border-right-table" style="width: 135px">Total %</td>
                <td class="sub-border-right-table">Fecha</td>
                <td class="border-right-table" style="width: 65px">%</td>
                <td class="sub-border-right-table">Fecha</td>
                <td class="border-right-table" style="width: 65px">%</td>
            </tr>
            <tr ng-repeat="row in myData" class="hover-row-detail">
                <td ng-click="loadGraphic($event,row.yearChartURL);$event.stopPropagation();" >{{row.year}}</td>
                <td class="sub-border-right-table">{{row.entryDate | date: 'dd/MMM/yy'}}</td>
                <td class="border-right-table"><b>{{row.entryValue | twoDecimals}}</b></td>
                <td class="sub-border-right-table">{{row.exitDate | date: 'dd/MMM/yy'}}</td>
                <td class="border-right-table"><b>{{row.exitValue | twoDecimals}}</b></td>
                <td class="border-right-table" ng-class="{'negative-percent': row.returnValue < 0}"><b>{{(row.returnValue) | twoDecimals}}</b></td>
                <td class="sub-border-right-table">{{row.bestGainDate | date: 'dd/MMM/yy'}}</td>
                <td class="border-right-table" ng-class="{'negative-percent': row.bestGainValue < 0}"><b>{{row.bestGainValue}}</b></td>
                <td class="sub-border-right-table">{{row.worstLostDate | date: 'dd/MMM/yy'}}</td>
                <td class="border-right-table"><span ng-class="{'negative-percent': row.worstLostValue < 0}"><b>{{row.worstLostValue}}</b></span></td>
            </tr>
        </tbody>
    </table>

    <table class="summary-table">
        <thead>
            <tr>
                <th rowspan="2">Resumen</th>
                <th rowspan="2">Años</th>
                <th colspan="3">Rentabilidad (%)</th>
                <th rowspan="2">Duración Estrategia (días)</th>
            </tr>
            <tr>
                <th>Acumulada</th>
                <th>Promedio</th>
                <th>Diaria</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Ganancias</td>
                <td class="sub-border-right-table">{{infoPattern.win}}</td>
                <td class="sub-border-right-table" ng-class="{'negative-percent': infoPattern.accumulatedWin < 0}">{{infoPattern.accumulatedWin |  twoDecimals}}</td>
                <td class="sub-border-right-table" ng-class="{'negative-percent': (infoPattern.accumulatedWin / infoPattern.win) < 0}">{{(infoPattern.win > 0 ? infoPattern.accumulatedWin / infoPattern.win : 0) |  twoDecimals}}</td>
                <td class="sub-border-right-table">-</td>
                <td class="sub-border-right-table">-</td>
            </tr>
            <tr>
                <td>Pérdidas</td>
                <td class="sub-border-right-table">{{infoPattern.loss}}</td>
                <td class="sub-border-right-table" ng-class="{'negative-percent': infoPattern.accumulatedLoss < 0}">{{infoPattern.accumulatedLoss |  twoDecimals}}</td>
                <td class="sub-border-right-table" ng-class="{'negative-percent': (infoPattern.accumulatedLoss / infoPattern.loss) < 0}">{{(infoPattern.loss > 0 ? infoPattern.accumulatedLoss / infoPattern.loss : 0) |  twoDecimals}}</td>
                <td class="sub-border-right-table">-</td>
                <td class="sub-border-right-table">-</td>
            </tr>
            <tr>
                <td>Total</td>
                <td class="sub-border-right-table">{{infoPattern.win + infoPattern.loss}}</td>
                <td class="sub-border-right-table" ng-class="{'negative-percent': (infoPattern.accumulatedWin + infoPattern.accumulatedLoss) < 0}">{{infoPattern.accumulatedWin + infoPattern.accumulatedLoss |  twoDecimals}}</td>
                <td class="sub-border-right-table" ng-class="{'negative-percent': (infoPattern.accumulatedWin / infoPattern.win) < 0}">{{(infoPattern.accumulatedWin + infoPattern.accumulatedLoss) / (infoPattern.win + infoPattern.loss) |  twoDecimals}}</td>
                <td class="sub-border-right-table" ng-class="{'negative-percent': (infoPattern.dailyReturn) < 0}">{{infoPattern.dailyReturn |  twoDecimals}}</td>
                <td class="sub-border-right-table">{{infoPattern.duration}}</td>
            </tr>
        </tbody>
    </table>

    <table class="index-same-period-table" ng-show="infoPattern.samePeriodIndices.length > 0">
        <thead>
        <tr>
            <th rowspan="2">
                <span ng-if="infoPattern.productType != 'FUTURE'">Índice (Igual Periodo)</span>
                <span ng-if="infoPattern.productType == 'FUTURE'">Futuro (Mismo Periodo)</span>
            </th>
            <th><img src='assets/img/entry_orange_arrow.png'>Fecha Entrada</th>
            <th>{{infoPattern.entryDate | date: 'dd MMM'}}</th>
            <th colspan="2" class="border-right-table">Rentabilidad (%)</th>
            <th colspan="2">Años</th>
        </tr>
        <tr>
            <th><img src='assets/img/exit_orange_arrow.png'>Fecha Salida</th>
            <th>{{infoPattern.exitDate | date: 'dd MMM'}}</th>
            <th>Acumulada</th>
            <th class="border-right-table">Promedio</th>
            <th>Subida</th>
            <th>Bajada</th>
        </tr>
        </thead>
        <tbody>
        <tr ng-repeat="row in infoPattern.samePeriodIndices">
            <td colspan="3">{{row.asset.longName}}</td>
            <td class="border-right-table" ng-class="{'negative-percent': row.accumulatedReturn < 0}">{{row.accumulatedReturn}}</td>
            <td class="border-right-table" ng-class="{'negative-percent': row.averageReturn < 0}">{{row.averageReturn}}</td>
            <td class="border-right-table">{{row.win}}</td>
            <td>{{row.loss}}</td>
        </tr>
        </tbody>
    </table>
    <div class="copyright">
        Copyright © {{actualDate | date: 'yyyy'}} Market Observatory
    </div>
</div>

<div class="pdf-icon-detail" ng-click="generateGraphicsPdf(infoPattern.id ,'PRICE');"></div>
<div class="graphic-header">
    <div class="float-left">
        <span ng-class="{'buy-color': infoPattern.patternType == 'BULLISH', 'sell-color': infoPattern.patternType == 'BEARISH'}">{{infoPattern.name}}</span>
        <br>
        Precio / Patrón Estacional 15 años (00-14)
    </div>
    <div class="float-right" style="margin-top: 15px;">
        <div class="year-caption"></div>15 Años Patrón <div class="price-caption"></div> Precio
    </div>
</div>
<div class="graphic-container">
    <img ng-src="{{infoPattern.priceChartURL}}" class="graphic-detail">
</div>
<div class="graphic-header">
    <div class="float-left">
        <span ng-class="{'buy-color': infoPattern.patternType == 'BULLISH', 'sell-color': infoPattern.patternType == 'BEARISH'}">{{infoPattern.name}}</span>
        <br>
        Patrones Estacionales 15 años (00-14) / 6 años (09-14)
    </div>
    <div class="float-right" style="margin-top: 15px;">
        <div class="year-caption"></div>15 Años Patrón <div class="six-year-caption"></div> 6 Años Patrón
    </div>
</div>
<div class="graphic-container" style="margin-bottom: 80px;border-bottom: 1px solid #9B9C9E;">
    <img ng-src="{{infoPattern.sixYearChartURL}}" class="graphic-detail">
    <div class="copyright" style="margin-top: -18px;">
        Copyright © {{actualDate | date: 'yyyy'}} Market Observatory
    </div>
</div>



<div class="pdf-icon-detail"ng-click="generateGraphicsPdf(infoPattern.id, 'WEEKLY');"></div>
<div class="graphic-header">
    <div class="float-left">
        <span ng-class="{'buy-color': infoPattern.patternType == 'BULLISH', 'sell-color': infoPattern.patternType == 'BEARISH'}">{{infoPattern.name}}</span>
        <br>
        Gráfico Semanal
    </div>
    <div class="float-right" style="margin-top: 15px;">
        <div class="price-caption"></div> Precio
    </div>
</div>
<div class="graphic-container">
    <img ng-src="{{infoPattern.weekChartURL}}" class="graphic-detail">
</div>
<div class="graphic-header">
    <div class="float-left">
        <span ng-class="{'buy-color': infoPattern.patternType == 'BULLISH', 'sell-color': infoPattern.patternType == 'BEARISH'}">{{infoPattern.name}}</span>
        <br>
        Gráfico Mensual
    </div>
    <div class="float-right" style="margin-top: 15px;">
        <div class="price-caption"></div> Precio
    </div>
</div>
<div class="graphic-container" style="border-bottom: 1px solid #9B9C9E;margin-bottom: 20px;">
    <img ng-src="{{infoPattern.monthChartURL}}" class="graphic-detail">
    <div class="copyright" style="margin-top: -18px;">
        Copyright © {{actualDate | date: 'yyyy'}} Market Observatory
    </div>
</div>