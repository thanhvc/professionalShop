<div class="super-border private-black-title">Correlación</div>
<div class="private-container-text">
    <p>El análisis de correlación entre activos, permite planificar la diversificación de los componentes de una Cartera.</p>
    <p>Los valores de correlación entre dos activos están comprendidos entre [-100%, +100%] con zonas singulares:</p>
    <ul class="public-list-first-level">
        <li>-100%. La variación de rentabilidades de ambos activos es en sentido opuesto e idénticas en proporción. Cuanto más negativo más eficaz es la diversificación.
        <li>0%. No hay relación en las rentabilidades de ambas series. Pueden ser componentes válidos para diversificar.</li>
        <li>+100%. La variación de rentabilidades de ambos activos es en el mismo sentido e idénticas en proporción. Cuanto más positivo menor diversificación, o
            lo que es equivalente, mayor “asociación” o duplicación.</li>
    </ul>

    <p>El modo de uso es como sigue: <span ng-click="show=!show" ng-hide="show" class="toggle-link show-more">Mostrar Más</span></p>
    <div ng-show="show">
        <ul class="public-list-first-level">
            <li>Use “<span class="blue-text">>></span>” para incluir los activos a evaluar.</li>
            <li>Pulse “Calcular“ y analice los resultados.</li>
            <li>Use “<span class="blue-text"><<</span>” para eliminar los activos descartables.</li>
            <li>Añada con “<span class="blue-text">>></span>” nuevos activos y repita el ciclo.</li>
            <li>Use la marca de Favoritos para separar sus activos preferidos.</li>
        </ul>

        <p><a ng-click="openModalInstance('services/detailed_description/correlation')">Más información.</a></p>

        <span ng-click="show=!show" class="toggle-link show-less">Mostrar menos</span>
    </div>

</div>

<div style="margin-top: 15px;">

    <tabset>
        <tab ng-click="changeTab(ctab.value)" ng-repeat="ctab in tabs" heading="{{ctab.title}}"
             active="ctab.active" disabled="tab.disabled">
            <div class="correlation-filter-container">

                <div ng-include="getTemplateFilter()"></div>
            </div>
            <div>
                <div ng-include="getTemplateTable()">


            </div>

                <div class="footer-table-correlation">
                    <div class="pagination-correlation-container" >
                        <pagination ng-show="found > pagingOptions.pageSize" boundary-links="true" on-select-page="setPage(page)" total-items="found"
                                    items-per-page="pagingOptions.pageSize" max-size="10"
                                    page="pagingOptions.currentPage" class="pagination-sm" previous-text="&lt;"
                                    next-text="&gt;"
                                    first-text="&lt;&lt;" last-text="&gt;&gt;"></pagination>
                    </div>
                    <div>
                        <button style="width: 120px;margin-left: 165px;margin-right:35px;" class="mo-cancel-button" ng-click="clearCorrelationList();">
                            Cancelar
                        </button>
                        <button style="width: 120px;" class="mo-button" ng-click="correlate();">
                            Calcular
                        </button>
                    </div>
                </div>
            </div>

        </tab>
    </tabset>
    <div ng-if="correlationData.length > 0" id="correlation-result-container">
        <table class="table-correlation-result" style="margin-bottom: 30px;">
            <thead>
                <tr>
                    <th colspan="{{correlationData.length}}"><span style="float:left;">COEFICIENTES DE CORRELACIÓN (%) </span> <span style="float:right;">({{lastUpdateDateCorrelation | date: 'dd MMM yyyy'}})</span></th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="row in correlationData track by $index">
                   <!-- <td  ng-repeat="column in row track by $index" ng-class="{'high-correlation': column.value >= 80, 'buy-color': column.patternType == 'BULLISH', 'sell-color': column.patternType == 'BEARISH'}">{{column.value}}</td>-->
                   <td  ng-repeat="column in row track by $index"  ng-class="{'high-correlation': column.value >= 80, 'buy-color': column.patternType == 'BULLISH', 'sell-color': column.patternType == 'BEARISH'}">
                        <span  ng-if="column.name == ''">{{column.value}}</span>
                       <span tooltip-html-unsafe="{{column.name}}"  ng-if="column.name != ''" class="cursor-help">{{column.value}}</span>
                   </td>
                </tr>
            </tbody>
        </table>

        <table class="table-correlation-result" ng-if="filterOptions.filters.active_tab == 1 && pairCorrelationData.length > 2 || (filterOptions.filters.active_tab == 2 && filterOptions.filters.index_type == 1) && pairCorrelationData.length > 2">
            <thead>
            <tr>
                <th colspan="{{pairCorrelationData.length}}"><span style="float:left;">COEFICIENTES DE CORRELACIÓN PARES (%) </span></th>
            </tr>
            </thead>
            <tbody>
            <tr ng-repeat="row in pairCorrelationData track by $index">
                <td  ng-repeat="column in row track by $index" ng-class="{'high-correlation': column >= 80}">
                    <span  ng-if="column.name == ''">{{column.value}}</span>
                    <span tooltip-html-unsafe="{{column.name}}"  ng-if="column.name != ''" class="cursor-help">{{column.value}}</span>
                </td>
            </tr>
            </tbody>
        </table>

        <div style="margin: 0 auto; width: 740px;">
            <table class="correlation-caption-table" ng-if="correlationCaption1.length > 0">
                <thead>
                    <tr>
                        <!--<th><span tooltip="Favoritos">Fav.</span></th> -->
                        <th>Código</td>
                        <th>Símbolo</td>
                        <th>Nombre</td>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="row in correlationCaption1 track by $index">
                        <!--<td>
                            <div class="current-favourite" tooltip-html-unsafe="Marcar Estrategia Favorita" ng-click="toggleFavorite(row.id);"
                                  ng-class="{'favourite-added': row.favorite == true}"></div>
                        </td> -->
                        <td ng-class="{'buy-color': row.patternType == 'BULLISH', 'sell-color': row.patternType == 'BEARISH'}">{{row.code}}</td>
                        <td>{{row.symbol}}</td>
                        <td>{{row.name | limitTo: 35}}</td>
                    </tr>
                </tbody>
            </table>

            <table class="correlation-caption-table" style="margin-left: 75px;" ng-if="correlationCaption2.length > 0">
                <thead>
                <tr>
                    <!--<th><span tooltip="Favoritos">Fav.</span></th> -->
                    <th>Código</td>
                    <th>Símbolo</td>
                    <th>Nombre</td>
                </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="row in correlationCaption2 track by $index">
                        <!--<td>
                            <div class="current-favourite" tooltip-html-unsafe="Marcar Estrategia Favorita" ng-click="toggleFavorite(row.id);"
                                 ng-class="{'favourite-added': row.favorite == true}"></div>
                        </td> -->
                        <td ng-class="{'buy-color': row.patternType == 'BULLISH', 'sell-color': row.patternType == 'BEARISH'}">{{row.code}}</td>
                        <td>{{row.symbol}}</td>
                        <td>{{row.name | limitTo: 35}}</td>
                    </tr>
                </tbody>
            </table>
            <!--
            <button style="width: 120px;float:right;" class="mo-button" ng-click="clearCorrelationList();">
                Aceptar
            </button>-->
            <div class="excel-correlation-icon" ng-click="generateCorrelationExcel()"></div>
            <div class="pdf-correlation-icon" ng-click="generatePdf();"></div>
            <div class="copyright">
                Copyright © {{actualDate | date: 'yyyy'}} Market Observatory
            </div>
        </div>
    </div>
</div>